(function(a,b,c){"use strict";function d(a,b){for(var d=[],e=0;e<a.length;e++)d.push(b.call(c,a[e],e));return d}function e(a){function b(a,b,c){var d=this,e=!1;this.name=a,this.operator=b,this.value=c,this.not=function(){return e=!e,d},this.toString=function(){return a+"="+(e?"!":"")+b.value+":"+c}}function c(a){return function(c){return function(d){return i.push(new b(a,c,d)),g}}}function e(a){return function(c){return function(d){return i.push(new b(a,c,d).not()),g}}}function f(){return"chainWith="+h.value+"&"+d(i,function(a){return a.toString()}).join("&")}var g=this,h=a||k.None,i=[];this.where=c,this.whereNot=e,this.toString=f}function f(a,b){this.Id=null,this.CheckTag=null,this.Meta=b||{},this.Data=a||null}function g(a,b,c){this.isSuccess=a===!0?!0:!1,this.reason=b||null,this.data=c,this.toString=function(){return this.reason?this.reason:this.isSuccess?m.success:m.failure}}function h(e,h){function i(c,d,e,f,g){a.ajax(c||p,{accepts:{json:"application/json"},contentType:"application/json",processData:!1,data:b.stringify(e),error:g,success:f,type:d||"GET"})}function j(a,b){"function"==typeof a&&a.apply(null,b)}function k(a,b){if(!a)throw new Error("No Entity ID");var d=b;return i(p+q+a,"GET",c,function(a){j(d,[new g(!0,null,f.fromDto(a))])},function(a,b,c){j(d,[new g(!1,c)])}),{then:function(a){d=a}}}function l(a,b){if(!a)throw new Error("No Entity to save");var c=b;return i(p+q,"PUT",a,function(b){a.Id=b.Id,a.CheckTag=b.CheckTag,j(c,[new g(!0,null,a)])},function(a,b,d){j(c,[new g(!1,d)])}),{then:function(a){c=a}}}function m(a,b){if(!a)throw new Error("No query provided");var d=b;return i(p+"meta/"+q+"?"+a,"GET",c,function(a){j(d,[new g(!0,null,a)])},function(a,b,c){j(d,[new g(!1,c)])}),{then:function(a){d=a}}}function n(a,b){if(!a)throw new Error("No query provided");var e=b;return i(p+q+"?"+a,"GET",c,function(a){j(e,[new g(!0,null,d(a,f.fromDto))])},function(a,b,c){j(e,[new g(!1,c)])}),{then:function(a){e=a}}}function o(a,b){if(!a)throw new Error("No Entity ID");var d=b;return i(p+q+a,"DELETE",c,function(){j(d,[new g(!0,null,c)])},function(a,b,c){j(d,[new g(!1,c)])}),{then:function(a){d=a}}}var p=h||"http://localhost/HttpDataStore/",q=e||"Default/";"/"!==q[q.length-1]&&(q+="/"),this.Save=l,this.Load=k,this.QueryMeta=m,this.Query=n,this.Delete=o}function i(a){function b(a){return d+e+a}function c(){return d+e}var d=a||"http://localhost/HttpDataStore/",e="blob/",f=new h(e,d);this.Query=f.Query,this.UrlFor=b,this.UploadUrl=c}function j(c){function d(a,b){"function"==typeof a&&a.apply(null,b)}function e(c,e,f,h){var j=h;return a.ajax(i+"?storeName="+e+"&clientId="+f,{accepts:{json:"application/json"},contentType:"application/json",processData:!1,data:b.stringify(c),error:function(a,b,c){d(j,[new g(!1,c)])},success:function(a){d(j,[new g(!0,null,a)])},type:"PUT"}),{then:function(a){j=a}}}function h(b,c,e){var h=e;return a.ajax(i+"?clientId="+c+"&validationToken="+b,{accepts:{json:"application/json"},contentType:"application/json",processData:!1,data:null,error:function(a,b,c){d(h,[new g(!1,c)])},success:function(a){d(h,[new g(!0,null,f.fromDto(a))])},type:"POST"}),{then:function(a){h=a}}}var i=(c||"http://localhost/HttpDataStore/")+"validate/";this.QueueForValidation=e,this.Validate=h}var k={None:{id:0,value:"None"},And:{id:1,value:"And"},Or:{id:2,value:"Or"}},l={EqualTo:{id:0,value:"Equals"},LowerThan:{id:1,value:"LowerThan"},LowerThanOrEqualTo:{id:2,value:"LowerThanOrEqual"},HigherThan:{id:3,value:"HigherThan"},HigherThanOrEqualTo:{id:4,value:"HigherThanOrEqual"},Containing:{id:5,value:"Contains"},BeginningWith:{id:6,value:"BeginsWith"},EndingWith:{id:7,value:"EndsWith"}},m={success:"Operation completed successfully",failure:"Cannot complete the operation, please try again or contact us"};f.fromDto=function(a){var b=new f(a.Data,a.Meta);return b.Id=a.Id,b.CheckTag=a.CheckTag,b},this.H=this.H||{},this.H.DataStore={Store:h,BlobStore:i,Validation:j,Entity:f,chainBy:k,is:l,OperationResult:g,Query:e,queryWithNone:function(){return new e(k.None)},queryWithAnd:function(){return new e(k.And)},queryWithOr:function(){return new e(k.Or)}},this.ds||(this.ds=this.H.DataStore)}).call(this,this.jQuery,this.JSON);